{"mappings":"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","sources":["src/js/templates/gallery-main.js","src/js/load-more-btn.js","src/js/gallery1.js","src/js/searchService.js"],"sourcesContent":["export default function galleryCardMainTpl(image) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n    \n    return `\n            <div class=photo-card>\n                <img class=photo-card_image src=${webformatURL} alt=${tags} loading=\"lazy\" />\n                <div class=info>\n                    <p class=info-item>\n                    <b>Likes ${likes}</b>\n                    </p>\n                    <p class=info-item>\n                    <b>Views ${views}</b>\n                    </p>\n                    <p class=info-item>\n                    <b>Comments ${comments}</b>\n                    </p>\n                    <p class=info-item>\n                    <b>Downloads ${downloads}</b>\n                    </p>\n                </div>\n            </div>\n        `;\n}","export default class LoadMoreBtn {\n    constructor({selector, hidden = false}) {\n        this.button = document.querySelector(selector);;\n\n        hidden && this.hide();\n    }\n\n    enable() {\n        this.button.disabled = false;\n    }\n\n    disabled() {\n        this.button.disabled = true;\n    }\n\n    show() {\n        this.button.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.button.classList.add('is-hidden');\n    }\n    \n}","import '../css/common.css';\nimport axios from \"axios\";\nimport Notiflix from 'notiflix';\nimport galleryCardMainTpl from './templates/gallery-main';\nimport SearchService from './searchService';\nimport LoadMoreBtn from './load-more-btn';\n\nconst searchFormEl = document.querySelector('#search-form');\nconst cardContainerEl = document.querySelector('.gallery');\n\nconst loadMoreBtn = new LoadMoreBtn({ selector: '.load-more', hidden: true });\nconst submitBtn = new LoadMoreBtn({ selector: '.submit-btn', hidden: false })\nconst searchService = new SearchService();\n\nsearchFormEl.addEventListener('submit', onSearch);\nloadMoreBtn.button.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n    e.preventDefault();\n    clearCardcontainer();\n\n    searchService.word = e.currentTarget.elements.searchQuery.value.trim();\n    \n    if (searchService.word === '') {\n        return Notiflix.Notify.info(\"Please, enter a search query!\");\n    }\n\n    searchService.resetPage();\n    searchService.resetViewedPhotoes();\n    submitBtn.disabled();\n    loadMoreBtn.hide();\n\n    try {\n        const { hits, totalHits } = await searchService.fetchArticles();\n\n        if (hits.length === 0) {\n            loadMoreBtn.hide();\n            submitBtn.enable();\n\n            \n            return Notiflix.Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        }\n\n        appendPhotoCardMarkup(hits);\n        submitBtn.enable();\n        loadMoreBtn.show();\n        loadMoreBtn.enable();\n\n       // endOfCollection(totalHits, searchService.viewedPhotoes, searchService.perPage);\n        \n    } catch (error) {\n        Notiflix.Notify.info(\"We're sorry, try ones more.\");\n        console.log(error);\n    }\n\n    \n    \n}\n\nasync function onLoadMore() {\n    loadMoreBtn.disabled();\n\n    try {\n        const { hits, totalHits } = await searchService.fetchArticles();\n        \n        appendPhotoCardMarkup(hits);\n        loadMoreBtn.enable();\n\n        console.log(totalHits, searchService.viewedPhotoes, searchService.perPage);\n        endOfCollection(totalHits, searchService.viewedPhotoes, searchService.perPage);\n    } catch (error) {\n        Notiflix.Notify.info(\"We're sorry, try the query ones more.\");\n        console.log(error);\n    }\n}\n\nfunction appendPhotoCardMarkup(hits) {\n    const makePhotoCards = hits\n        .map(galleryCardMainTpl)\n        .join('');\n    \n    cardContainerEl.insertAdjacentHTML('beforeend', makePhotoCards);\n}\n\nfunction clearCardcontainer() {\n    cardContainerEl.innerHTML = '';\n}\n\nfunction endOfCollection(total, shown, per) {\n    if (total <= shown || shown < per) {\n        loadMoreBtn.hide();\n        Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n    }\n}","const KEY = '33857363-bdd91af921483c20a6a440946';\nconst BASE_URL = \"https://pixabay.com/\";\n\nexport default class SearchService {\n    constructor() { \n        this.searchWord = '';\n        this.page = 1;\n        this.viewedPhotoes = 0;\n        this.perPage = 101;\n    }\n    \n    async fetchArticles() {\n        const url = `${BASE_URL}/api/?key=${KEY}&q=${this.searchWord}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${this.perPage}&page=${this.page}`;\n    \n        const r = await fetch(url);\n        const data = await r.json();\n\n        try {\n            this.incrementPage();\n            this.viewedPhotoes += data.hits.length;\n            console.log(this.viewedPhotoes);\n\n        return data;\n        } catch (error) {\n            console.log(error);\n        }\n\n        \n        \n    }\n\n    incrementPage() {\n        this.page += 1;\n    }\n\n    resetPage() {\n        this.page = 1;\n    }\n\n    resetViewedPhotoes() {\n        this.viewedPhotoes = 0;\n    }\n    \n    get word() {\n        return this.searchWord;\n    }\n\n    set word(newWord) {\n        this.searchWord = newWord;\n    }\n}\n\n\n\n"],"names":["$d9ee898de1b60995$export$2e2bcd8739ae039","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$19a565c91edb3dc2$export$2e2bcd8739ae039","enable","this","button","disabled","show","classList","remove","hide","add","constructor","selector","hidden","document","querySelector","$1d912b2854b26a87$var$searchFormEl","$1d912b2854b26a87$var$cardContainerEl","$1d912b2854b26a87$var$loadMoreBtn","$1d912b2854b26a87$var$submitBtn","$1d912b2854b26a87$var$searchService","async","url","searchWord","perPage","page","r","fetch","data","json","incrementPage","viewedPhotoes","hits","length","console","log","error","resetPage","resetViewedPhotoes","word","newWord","$1d912b2854b26a87$var$appendPhotoCardMarkup","makePhotoCards","map","join","insertAdjacentHTML","addEventListener","e","preventDefault","innerHTML","$1d912b2854b26a87$var$clearCardcontainer","currentTarget","elements","searchQuery","value","trim","$parcel$interopDefault","$7Y9D8","Notify","info","totalHits","fetchArticles","failure","total","shown","per"],"version":3,"file":"gallery1.d0d5f401.js.map"}