{"mappings":"mjBAAe,SAAAA,EAA4BC,GACvC,MAAMC,aAAEA,EAAYC,cAAEA,EAAaC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,GAAcP,EAEjF,MAAO,yFAEuCC,SAAoBE,gIAGvCC,0GAGAC,6GAGGC,8GAGCC,uF,+BCTnC,MAAMC,EAAeC,SAASC,cAAc,gBACtCC,EAAkBF,SAASC,cAAc,YAEzCE,EAAc,IAAI,EAAAC,EAAAC,SAAY,CAAEC,SAAU,aAAcC,QAAQ,IAChEC,EAAY,IAAI,EAAAJ,EAAAC,SAAY,CAAEC,SAAU,cAAeC,QAAQ,IAC/DE,EAAgB,IAAI,EAAAC,EAAAL,SAE1B,IAAIM,EAAa,EAyDjB,SAASC,IACL,OAAOC,OAAOC,aAAed,SAASe,gBAAgBC,M,CAgC1D,SAASC,EAAYC,GACjBC,EAAAC,GAASC,OAAOC,KAAK,+BACrBd,EAAUe,SACVC,QAAQC,IAAIP,E,CAGhB,SAASQ,EAAsBC,GAC3B,MAAMC,EAAiBD,EAClBE,IAAIvC,GACJwC,KAAK,IAEV5B,EAAgB6B,mBAAmB,YAAaH,E,CAnGpD7B,EAAaiC,iBAAiB,UAI9BC,eAAwBC,GAMpB,GALAA,EAAEC,iBAiGN,WACIjC,EAAgBkC,UAAY,E,CAjG5BC,GAEA5B,EAAc6B,KAAOJ,EAAEK,cAAcC,SAASC,YAAYC,MAAMC,OA6DpE,SAA4BF,GACxB,GAAoB,KAAhBA,EAIA,OAHAtC,EAAYyC,OACZzB,EAAAC,GAASC,OAAOwB,QAAQ,kCAEjB,C,CAhEPC,CAAmBrC,EAAc6B,MACjC,OAGJ7B,EAAcsC,YACdtC,EAAcuC,qBACdxC,EAAUyC,WACV9C,EAAYyC,OAEZ,IACI,MAAMjB,KAAEA,EAAIuB,UAAEA,SAAoBzC,EAAc0C,gBAEhD,GAwDR,SAA4BC,GACxB,GAAe,IAAXA,EAKA,OAJAjD,EAAYyC,OACZpC,EAAUe,SACVJ,EAAAC,GAASC,OAAOgC,QAAQ,6EAEjB,C,CA9DHC,CAAmB3B,EAAKyB,QACxB,OAGJjC,EAAAC,GAASC,OAAOkC,QAAQ,oBAAoBL,aAE5CxB,EAAsBC,GACtBnB,EAAUe,SACVpB,EAAYqD,OACZrD,EAAYoB,SAoF6BkC,EAlFDP,EAkFQQ,EAlFGjD,EAAckD,QAmFjEF,GAASC,GAAiB,IAAVD,GAChBtD,EAAYyC,M,CAlFd,MAAO1B,GACLD,EAAYC,E,CA+EpB,IAAiDuC,EAAOC,C,IAlHxDvD,EAAYyD,OAAO5B,iBAAiB,SAuCpCC,iBACI9B,EAAY8C,WAEZ,IACI,MAAMtB,KAAEA,EAAIuB,UAAEA,SAAoBzC,EAAc0C,gBAEhDhD,EAAYoB,SACZG,EAAsBC,GA2DL8B,EA1DDP,EA0DQW,EA1DGpD,EAAcqD,cA0DVJ,EA1DyBjD,EAAckD,SA2DtEF,GAASI,GAASA,EAAQH,IAC1BvD,EAAYyC,M,CA1Dd,MAAO1B,GACLD,EAAYC,E,CAuDpB,IAAyBuC,EAAOI,EAAOH,C,IAxGvC7C,OAAOmB,iBAAiB,SAAUb,EAAA4C,EAAA,EAyDlC,WACQnD,IAAmBD,GACfE,OAAOC,YAAcd,SAASe,gBAAgBiD,cA6D/CC,KAAKC,IACRlE,SAASmE,KAAKC,aAAcpE,SAASe,gBAAgBqD,aACrDpE,SAASmE,KAAKE,aAAcrE,SAASe,gBAAgBsD,aACrDrE,SAASmE,KAAKH,aAAchE,SAASe,gBAAgBiD,cAhE8B,IAChF7D,EAAYyD,OAAOU,UAAUC,SAAS,cACrCpD,EAAAC,GAASC,OAAOC,KAAK,8DAG7BX,EAAaC,G,GAhEoC","sources":["src/js/templates/gallery-main.js","src/js/gallery1.js"],"sourcesContent":["export default function galleryCardMainTpl(image) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n    \n    return `\n            <div class=photo-card>\n                <img class=photo-card_image src=${webformatURL} alt=${tags} loading=\"lazy\" />\n                <div class=info>\n                    <p class=info-item>\n                    <b>Likes ${likes}</b>\n                    </p>\n                    <p class=info-item>\n                    <b>Views ${views}</b>\n                    </p>\n                    <p class=info-item>\n                    <b>Comments ${comments}</b>\n                    </p>\n                    <p class=info-item>\n                    <b>Downloads ${downloads}</b>\n                    </p>\n                </div>\n            </div>\n        `;\n}","import '../css/common.css';\n//import axios from \"axios\";\nimport Notiflix from 'notiflix';\nimport throttle from 'lodash.throttle';\nimport galleryCardMainTpl from './templates/gallery-main';\nimport SearchService from './searchService';\nimport LoadMoreBtn from './load-more-btn';\n\nconst searchFormEl = document.querySelector('#search-form');\nconst cardContainerEl = document.querySelector('.gallery');\n\nconst loadMoreBtn = new LoadMoreBtn({ selector: '.load-more', hidden: true });\nconst submitBtn = new LoadMoreBtn({ selector: '.submit-btn', hidden: false })\nconst searchService = new SearchService();\n\nlet lastScroll = 0;\n\nsearchFormEl.addEventListener('submit', onSearch);\nloadMoreBtn.button.addEventListener('click', onLoadMore);\nwindow.addEventListener('scroll', throttle(onScroll, 750));\n\nasync function onSearch(e) {\n    e.preventDefault();\n    clearCardcontainer();\n\n    searchService.word = e.currentTarget.elements.searchQuery.value.trim();\n    \n    if (isSearchQueryAmpty(searchService.word)) {\n        return;\n    }; \n\n    searchService.resetPage();\n    searchService.resetViewedPhotoes();\n    submitBtn.disabled();\n    loadMoreBtn.hide();\n\n    try {\n        const { hits, totalHits } = await searchService.fetchArticles();\n\n        if (isArrayOfDataAmpty(hits.length)) {\n            return;\n        }\n\n        Notiflix.Notify.success(`Hooray! We found ${totalHits} images.`);\n\n        appendPhotoCardMarkup(hits);\n        submitBtn.enable();\n        loadMoreBtn.show();\n        loadMoreBtn.enable();\n\n        lessPhotoesThanPerpageInTheFirstRequest(totalHits, searchService.perPage);       \n        \n    } catch (error) {\n        onSomeError(error);\n    }\n}\n\nasync function onLoadMore() {\n    loadMoreBtn.disabled();\n\n    try {\n        const { hits, totalHits } = await searchService.fetchArticles();\n        \n        loadMoreBtn.enable();\n        appendPhotoCardMarkup(hits);\n        endOfCollection(totalHits, searchService.viewedPhotoes, searchService.perPage);\n    \n    } catch (error) {\n        onSomeError(error);\n    }\n}\n\nfunction scrollPosition() {\n    return window.pageYOffset || document.documentElement.scroll;\n}\n\nfunction onScroll() {\n    if (scrollPosition() > lastScroll) {\n        if (window.pageYOffset + document.documentElement.clientHeight >= getDocHeight() - 20\n        && loadMoreBtn.button.classList.contains('is-hidden')) {   \n            Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        };\n    };\n    lastScroll = scrollPosition(); \n}\n\nfunction isSearchQueryAmpty(searchQuery) {\n    if (searchQuery === '') {\n        loadMoreBtn.hide();\n        Notiflix.Notify.warning(\"Please, enter a search query!\");\n\n        return true;\n    };\n}\n\nfunction isArrayOfDataAmpty(length) {\n    if (length === 0) {\n        loadMoreBtn.hide();\n        submitBtn.enable();\n        Notiflix.Notify.failure(\"Sorry, there are no images matching your search query. Please try again.\");\n        \n        return true;\n    };\n}\n\nfunction onSomeError(error) {\n    Notiflix.Notify.info(\"We're sorry, try ones more.\");\n    submitBtn.enable();\n    console.log(error);\n}\n\nfunction appendPhotoCardMarkup(hits) {\n    const makePhotoCards = hits\n        .map(galleryCardMainTpl)\n        .join('');\n    \n    cardContainerEl.insertAdjacentHTML('beforeend', makePhotoCards);\n}\n\nfunction clearCardcontainer() {\n    cardContainerEl.innerHTML = '';\n}\n\nfunction endOfCollection(total, shown, per) {\n    if (total <= shown || shown < per) {\n        loadMoreBtn.hide();\n        //setTimeout(() => {\n         //   Notiflix.Notify.info(\"We're sorry, but you've reached the end of search results.\");\n        //}, 1000);\n    }\n}\n\nfunction lessPhotoesThanPerpageInTheFirstRequest(total, per) {\n    if (total <= per && total !== 0) {\n        loadMoreBtn.hide();\n    }\n}\n\nfunction getDocHeight() {\n    return Math.max(\n        document.body.scrollHeight, document.documentElement.scrollHeight,\n        document.body.offsetHeight, document.documentElement.offsetHeight,\n        document.body.clientHeight, document.documentElement.clientHeight\n    );\n}"],"names":["$d9ee898de1b60995$export$2e2bcd8739ae039","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","$1d912b2854b26a87$var$searchFormEl","document","querySelector","$1d912b2854b26a87$var$cardContainerEl","$1d912b2854b26a87$var$loadMoreBtn","$2cvPU","default","selector","hidden","$1d912b2854b26a87$var$submitBtn","$1d912b2854b26a87$var$searchService","$aYq7L","$1d912b2854b26a87$var$lastScroll","$1d912b2854b26a87$var$scrollPosition","window","pageYOffset","documentElement","scroll","$1d912b2854b26a87$var$onSomeError","error","$parcel$interopDefault","$7Y9D8","Notify","info","enable","console","log","$1d912b2854b26a87$var$appendPhotoCardMarkup","hits","makePhotoCards","map","join","insertAdjacentHTML","addEventListener","async","e","preventDefault","innerHTML","$1d912b2854b26a87$var$clearCardcontainer","word","currentTarget","elements","searchQuery","value","trim","hide","warning","$1d912b2854b26a87$var$isSearchQueryAmpty","resetPage","resetViewedPhotoes","disabled","totalHits","fetchArticles","length","failure","$1d912b2854b26a87$var$isArrayOfDataAmpty","success","show","total","per","perPage","button","shown","viewedPhotoes","$9OeKo","clientHeight","Math","max","body","scrollHeight","offsetHeight","classList","contains"],"version":3,"file":"gallery1.9d0db8fa.js.map"}